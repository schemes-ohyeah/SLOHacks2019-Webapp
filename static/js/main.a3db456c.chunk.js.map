{"version":3,"sources":["img/logo.png","components/AudioTranscriber.js","util/Firebase.js","components/LogoIcon.js","pages/home.js","util/DragonBoard.js","util/GoogleSpeech.js","pages/detail.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","AudioTranscriber","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","initAudioRecorder","recognition","webkitSpeechRecognition","lang","interimResults","maxAlternatives","onresult","event","result","results","transcript","sendRecognizedSpeech","start","speechRecognition","undefined","_this2","react_default","a","createElement","className","onClick","Mic_default","React","Component","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Firebase","command","db","collection","add","name","successRate","timestamp","Date","toISOString","orderBy","get","then","querySnapshot","Promise","resolve","data","forEach","doc","dataPoint","id","push","commandId","limit","attemptId","update","success","getAttempt","recentAttempt","getFirstAttempt","firstAttempt","console","log","calibrate","findError","updateAttempt","normalizeCommandSuccess","body","reference","JSON","parse","measurements","recent","fetch","method","headers","Headers","Content-Type","stringify","response","json","totalError","error_x","error_y","error_z","catch","error","listAttempts","newSuccessRate","filter","item","length","LogoIcon","src","dog","style","height","alt","PureComponent","Home","acceptVoiceSample","modalOff","addCommand","state","voiceSample","toLowerCase","docRef","history","concat","modalOn","setState","determinedVoiceSample","showModal","receiveRecognizedSpeech","commands","listCommands","classes","AppBar_default","position","Toolbar_default","Typography_default","variant","color","grow","LogoIcon_LogoIcon","CircularProgress_default","List_default","padding","map","commandName","toUpperCase","substring","Math","round","ListItem_default","button","component","Link","key","to","ListItemText_default","primary","secondary","isNaN","Fab_default","fab","Dialog_default","open","onClose","DialogTitle_default","DialogContent_default","dialogContent","AudioTranscriber_AudioTranscriber","DialogActions_default","Button_default","disabled","withRouter","withStyles","theme","root","backgroundColor","palette","background","paper","width","minHeight","bottom","spacing","unit","right","textAlign","DragonBoard","IP_ADDRESS","command_id","status","text","GoogleSpeech","message","audioConfig","audioEncoding","pitch","speakingRate","input","voice","languageCode","Audio","audioContent","play","Detail","getData","getCommand","match","params","commandDetail","attempts","loopStatus","LOOP_STATUS","idle","handleLoopStatusUpdate","_startRecording","recording","_stopRecording","wait","alert","_moveDog","_processData","speak","startAccelerometer","warn","stopAccelerometer","validateAttempt","AppBar_AppBar_default","Toolbar_Toolbar_default","IconButton_default","menuButton","aria-label","KeyboardBackspace_default","Typography_Typography_default","title","index","ListItemAvatar_default","Avatar_default","successAvatar","failAvatar","Check_default","Close_default","moment","fromNow","Fab_Fab_default","PlayArrow_default","Stop_default","HourglassFull_default","flexGrow","marginLeft","marginRight","margin","green","red","marginTop","createMuiTheme","main","brown","App","MuiThemeProvider_default","CssBaseline_default","BrowserRouter","Switch","Route","exact","path","overflowY","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App","document","getElementById","URL","process","href","origin","addEventListener","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.a3db456c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.3fa51164.png\";","import React from \"react\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport \"./AudioTranscriber.css\";\r\n\r\nexport default class AudioTranscriber extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.speechRecognition = undefined;\r\n        this.initAudioRecorder();\r\n    }\r\n\r\n    initAudioRecorder = () => {\r\n        // eslint-disable-next-line\r\n        const recognition = new webkitSpeechRecognition();\r\n        recognition.lang = \"en-US\";\r\n        recognition.interimResults = false;\r\n        recognition.maxAlternatives = 1;\r\n\r\n        recognition.onresult = (event) => {\r\n            const result = event.results[0][0].transcript;\r\n            this.props.sendRecognizedSpeech(result);\r\n        };\r\n\r\n        recognition.start();\r\n\r\n        this.speechRecognition = recognition;\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"mic-icon-animation\" onClick={() => this.speechRecognition.start()}>\r\n                <MicIcon/>\r\n            </div>\r\n        );\r\n    }\r\n}","import * as firebase from \"firebase\";\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyA_0IhKpkkLMrzIl4zS8N306XibgNoRTP4\",\r\n    authDomain: \"slohacks-dog-instrucc.firebaseapp.com\",\r\n    databaseURL: \"https://slohacks-dog-instrucc.firebaseio.com\",\r\n    projectId: \"slohacks-dog-instrucc\",\r\n    storageBucket: \"\",\r\n    messagingSenderId: \"504644134709\"\r\n};\r\nfirebase.initializeApp(config);\r\n\r\nexport default class Firebase {\r\n    static db = firebase.firestore();\r\n\r\n    /**\r\n     * Adds a new command\r\n     *\r\n     * @param command\r\n     * @returns {Promise<firebase.firestore.DocumentReference>}\r\n     */\r\n    static addCommand(command) {\r\n        return Firebase.db.collection(\"commands\").add({\r\n            name: command,\r\n            successRate: 0,\r\n            timestamp: new Date().toISOString()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets a list of all commands sorted newest first. Document id\r\n     * is merged into the document data for convenient look up\r\n     *\r\n     * @returns {Promise<firebase.firestore.QuerySnapshot>}\r\n     */\r\n    static listCommands() {\r\n        return Firebase.db\r\n            .collection(\"commands\")\r\n            .orderBy(\"timestamp\", \"desc\")\r\n            .get()\r\n            .then(querySnapshot => {\r\n                return new Promise(resolve => {\r\n                    const data = [];\r\n                    querySnapshot.forEach(doc => {\r\n                        const dataPoint = doc.data();\r\n                        dataPoint.id = doc.id;\r\n                        data.push(dataPoint);\r\n                    });\r\n                    resolve(data);\r\n                });\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Gets the details of a specific command - unlike listCommands,\r\n     * document id is not merged into the response because it is already\r\n     * known (provided as argument)\r\n     *\r\n     * @param commandId\r\n     * @returns {Promise<firebase.firestore.DocumentData>}\r\n     */\r\n    static getCommand(commandId) {\r\n        return Firebase.db\r\n            .collection(\"commands\")\r\n            .doc(commandId)\r\n            .get()\r\n            .then(doc => doc.data())\r\n    }\r\n\r\n    /**\r\n     * Gets a list of all attempts for a specific command. Document id\r\n     * is merged into the document data for convenient look up\r\n     *\r\n     * @param commandId\r\n     * @returns {Promise<firebase.firestore.QuerySnapshot>}\r\n     */\r\n    static listAttempts(commandId) {\r\n        return Firebase.db\r\n            .collection(\"commands\")\r\n            .doc(commandId)\r\n            .collection(\"attempts\")\r\n            .orderBy(\"timestamp\", \"desc\")\r\n            .get()\r\n            .then(querySnapshot => {\r\n                return new Promise(resolve => {\r\n                    const data = [];\r\n                    querySnapshot.forEach(doc => {\r\n                        const dataPoint = doc.data();\r\n                        dataPoint.id = doc.id;\r\n                        data.push(dataPoint);\r\n                    });\r\n                    resolve(data);\r\n                });\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Gets the first command\r\n     *\r\n     * @param commandId\r\n     * @returns {Promise<firebase.firestore.QuerySnapshot>}\r\n     */\r\n    static getFirstAttempt(commandId) {\r\n        return Firebase.db\r\n            .collection(\"commands\")\r\n            .doc(commandId)\r\n            .collection(\"attempts\")\r\n            .orderBy(\"timestamp\")\r\n            .limit(1)\r\n            .get()\r\n            .then(querySnapshot => {\r\n                return new Promise(resolve => {\r\n                    let data = {};\r\n                    querySnapshot.forEach(doc => {\r\n                        data = doc.data();\r\n                        data.id = doc.id;\r\n                    });\r\n                    resolve(data);\r\n                })\r\n            })\r\n    }\r\n\r\n    /**\r\n     * Gets a specific attempt - typically used in non validated state\r\n     *\r\n     * @param commandId\r\n     * @param attemptId\r\n     */\r\n    static getAttempt(commandId, attemptId) {\r\n        return Firebase.db\r\n            .collection(\"commands\")\r\n            .doc(commandId)\r\n            .collection(\"attempts\")\r\n            .doc(attemptId)\r\n            .get()\r\n            .then(doc => doc.data());\r\n    }\r\n\r\n    /**\r\n     * After calculating attempt to be success or fail, update database\r\n     *\r\n     * @param commandId\r\n     * @param attemptId\r\n     * @param result true | false\r\n     * @returns {Promise<void>}\r\n     */\r\n    static updateAttempt(commandId, attemptId, result) {\r\n        return Firebase.db\r\n            .collection(\"commands\")\r\n            .doc(commandId)\r\n            .collection(\"attempts\")\r\n            .doc(attemptId)\r\n            .update({\r\n                success: result\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Submits data to Google Cloud Function to calculate if the move was successful\r\n     *\r\n     * @param commandId\r\n     * @param attemptId\r\n     */\r\n    static validateAttempt(commandId, attemptId) {\r\n        return new Promise(resolve => {\r\n            Firebase.getAttempt(commandId, attemptId)\r\n                .then(recentAttempt => {\r\n                    Firebase.getFirstAttempt(commandId)\r\n                        .then(firstAttempt => {\r\n                            console.log(firstAttempt.id, attemptId);\r\n                            if (firstAttempt.id === attemptId) {\r\n                                Firebase.calibrate(commandId, attemptId, resolve);\r\n                            }\r\n                            else {\r\n                                Firebase.findError(firstAttempt, recentAttempt, commandId, attemptId, resolve);\r\n                            }\r\n                        });\r\n                });\r\n        });\r\n    }\r\n\r\n    static calibrate(commandId, attemptId, resolve) {\r\n        Firebase.updateAttempt(commandId, attemptId, true)\r\n            .then(() => {\r\n                Firebase.normalizeCommandSuccess(commandId)\r\n                    .then(() => resolve(true));\r\n            });\r\n    }\r\n\r\n    static findError(firstAttempt, recentAttempt, commandId, attemptId, resolve) {\r\n        const cloudFunctionUrl = \"https://us-central1-slohacks-dog-instrucc.cloudfunctions.net/function-2\";\r\n        const body = {\r\n            reference: JSON.parse(firstAttempt.measurements),\r\n            recent: JSON.parse(recentAttempt.measurements)\r\n        };\r\n        fetch(cloudFunctionUrl, {\r\n            method: \"POST\",\r\n            headers: new Headers({\r\n                \"Content-Type\": \"application/json\"\r\n            }),\r\n            body: JSON.stringify(body)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                const ERROR_THRESHOLD = 100;\r\n                const totalError = data.error_x + data.error_y + data.error_z;\r\n                console.log(totalError);\r\n                const success = totalError < ERROR_THRESHOLD;\r\n                Firebase.updateAttempt(commandId, attemptId, success)\r\n                    .then(() => {\r\n                        Firebase.normalizeCommandSuccess(commandId)\r\n                            .then(() => {\r\n                                resolve(success)\r\n                            });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                console.error(error);\r\n                Firebase.findError(firstAttempt, recentAttempt, commandId, attemptId, resolve);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Once new attempt is determined, calculate new success rate for entire command\r\n     *\r\n     * @param commandId\r\n     * @returns {Promise<void>}\r\n     */\r\n    static normalizeCommandSuccess(commandId) {\r\n        return Firebase.listAttempts(commandId)\r\n            .then(data => {\r\n                const newSuccessRate = data.filter(item => item.success).length / data.length;\r\n                return Firebase.db\r\n                    .collection(\"commands\")\r\n                    .doc(commandId)\r\n                    .update({\r\n                        successRate: newSuccessRate\r\n                    });\r\n            })\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport dog from \"../img/logo.png\";\r\n\r\n\r\nexport default class LogoIcon extends React.PureComponent {\r\n    render() {\r\n        return <img src={dog} style={{height: \"1rem\"}} alt=\"Dog icon\"/>\r\n    }\r\n}","import React from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport List from \"@material-ui/core/List/List\";\r\nimport ListItem from \"@material-ui/core/ListItem/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText/ListItemText\";\r\nimport Dialog from \"@material-ui/core/Dialog/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions/DialogActions\";\r\nimport Button from \"@material-ui/core/Button/Button\";\r\nimport DialogContent from \"@material-ui/core/DialogContent/DialogContent\";\r\nimport {Link} from \"react-router-dom\";\r\nimport AudioTranscriber from \"../components/AudioTranscriber\";\r\nimport Firebase from \"../util/Firebase\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport {withRouter} from \"react-router\";\r\nimport LogoIcon from \"../components/LogoIcon\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: 500,\r\n        position: 'relative',\r\n        minHeight: 200,\r\n    },\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing.unit * 2,\r\n        right: theme.spacing.unit * 2,\r\n    },\r\n    dialogContent: {\r\n        textAlign: \"center\"\r\n    }\r\n});\r\n\r\nclass Home extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            commands: undefined,\r\n            determinedVoiceSample: false,\r\n            showModal: false,\r\n            voiceSample: \"\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        Firebase.listCommands().then(commands => this.setState({commands}));\r\n    }\r\n\r\n    acceptVoiceSample = () => {\r\n        this.modalOff();\r\n        Firebase.addCommand(this.state.voiceSample.toLowerCase())\r\n            .then(docRef => {\r\n                this.props.history.push(`/detail/${docRef.id}`);\r\n            });\r\n    };\r\n\r\n    modalOn = () => {\r\n        this.setState({\r\n            determinedVoiceSample: false,\r\n            showModal: true,\r\n            voiceSample: \"\"\r\n        });\r\n    };\r\n\r\n    modalOff = () => {\r\n        this.setState({\r\n            showModal: false\r\n        });\r\n    };\r\n\r\n    receiveRecognizedSpeech = (result) => {\r\n        this.setState({\r\n            determinedVoiceSample: true,\r\n            voiceSample: result\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        return (\r\n            <div>\r\n                {/* Application bar */}\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                            <LogoIcon/>{\" Dog Instrucc\"}\r\n                        </Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n\r\n                {/* List of doggo commands */}\r\n                {\r\n                    this.state.commands === undefined\r\n                        ? <CircularProgress/>\r\n                        : <List>\r\n                            {\r\n                                this.state.commands.length === 0\r\n                                    ? <Typography style={{padding: \"1rem\"}}>\r\n                                        No entries yet. Click the button at the bottom to get started!\r\n                                    </Typography>\r\n                                    : this.state.commands.map(command => {\r\n                                        const commandName = command.name[0].toUpperCase() + command.name.substring(1);\r\n                                        const successRate = Math.round(command.successRate * 100);\r\n                                        return (\r\n                                            <ListItem\r\n                                                button\r\n                                                component={Link}\r\n                                                key={command.id}\r\n                                                to={`/detail/${command.id}`}>\r\n                                                <ListItemText\r\n                                                    primary={commandName}\r\n                                                    secondary={`${isNaN(successRate) ? 0 : successRate}%`}/>\r\n                                            </ListItem>\r\n                                        );\r\n                                    })\r\n                            }\r\n                        </List>\r\n                }\r\n\r\n                {/* Add new command button */}\r\n                <Fab\r\n                    className={classes.fab}\r\n                    color=\"secondary\"\r\n                    onClick={this.modalOn}>\r\n                    <i className=\"fas fa-paw\"/>\r\n                </Fab>\r\n\r\n                {/* Add new command modal */}\r\n                <Dialog\r\n                    open={this.state.showModal}\r\n                    onClose={this.state.modalOff}>\r\n                    <DialogTitle>Speak a voice command</DialogTitle>\r\n                    <DialogContent className={classes.dialogContent}>\r\n                        <AudioTranscriber\r\n                            sendRecognizedSpeech={this.receiveRecognizedSpeech}/>\r\n                        <Typography>{this.state.voiceSample}</Typography>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button\r\n                            onClick={this.modalOff}\r\n                            color=\"secondary\">\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={this.acceptVoiceSample}\r\n                            color=\"primary\"\r\n                            disabled={!this.state.determinedVoiceSample}>\r\n                            OK\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(withStyles(styles)(Home));","export default class DragonBoard {\r\n    static IP_ADDRESS = \"http://192.168.137.65:8080\";\r\n\r\n    /**\r\n     * Tells DragonBoard to start recording accelerometer values\r\n     * with a provided Firebase document id to save to\r\n     *\r\n     * @param commandId\r\n     * @returns {Promise<number>}\r\n     */\r\n    static startAccelerometer(commandId) {\r\n        return fetch(DragonBoard.IP_ADDRESS, {\r\n            method: \"POST\",\r\n            headers: new Headers({\r\n                \"Content-Type\": \"application/json\"\r\n            }),\r\n            body: JSON.stringify({command_id: commandId})\r\n        }).then(response => response.status);\r\n    }\r\n\r\n    /**\r\n     * Tells DragonBoard to stop recording - the board will upload\r\n     * to Firebase return newly generated document id in the http text\r\n     *\r\n     * @returns {Promise<string>}\r\n     */\r\n    static stopAccelerometer() {\r\n        return fetch(DragonBoard.IP_ADDRESS, {\r\n            method: \"GET\"\r\n        }).then(response => response.text())\r\n    }\r\n}","const token = \"AIzaSyA_0IhKpkkLMrzIl4zS8N306XibgNoRTP4\";\r\n\r\nexport default class GoogleSpeech {\r\n    /**\r\n     * Reads message out loud.\r\n     * Promise finishes when clip is done playing.\r\n     *\r\n     * @param message\r\n     * @returns {Promise<void>}\r\n     */\r\n    static speak(message) {\r\n        return fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${token}`, {\r\n            method: \"POST\",\r\n            headers: new Headers({\r\n                \"Content-Type\": \"application/json\"\r\n            }),\r\n            body: JSON.stringify({\r\n                audioConfig: {\r\n                    audioEncoding: \"MP3\",\r\n                    pitch: \"0.00\",\r\n                    speakingRate: \"1.00\"\r\n                },\r\n                input: {\r\n                    text: message\r\n                },\r\n                voice: {\r\n                    languageCode: \"en-US\",\r\n                    name: \"en-US-Wavenet-B\"\r\n                }\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                const audio = new Audio(`data:audio/mp3;base64,${data.audioContent}`);\r\n                return audio.play();\r\n            })\r\n            .catch(error => console.error(error));\r\n    }\r\n}","import React from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography/Typography\";\r\nimport Fab from \"@material-ui/core/Fab/Fab\";\r\nimport IconButton from \"@material-ui/core/IconButton/IconButton\";\r\nimport BackButton from \"@material-ui/icons/KeyboardBackspace\";\r\nimport {Link} from \"react-router-dom\";\r\nimport withStyles from \"@material-ui/core/es/styles/withStyles\";\r\nimport PlayIcon from \"@material-ui/icons/PlayArrow\";\r\nimport StopIcon from \"@material-ui/icons/Stop\";\r\nimport WaitIcon from \"@material-ui/icons/HourglassFull\";\r\nimport List from \"@material-ui/core/List/List\";\r\nimport ListItem from \"@material-ui/core/ListItem/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar/Avatar\";\r\nimport moment from \"moment\";\r\nimport green from \"@material-ui/core/colors/green\";\r\nimport red from \"@material-ui/core/colors/red\";\r\nimport SuccessIcon from \"@material-ui/icons/Check\";\r\nimport FailIcon from \"@material-ui/icons/Close\";\r\nimport Firebase from \"../util/Firebase\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress/CircularProgress\";\r\nimport DragonBoard from \"../util/DragonBoard\";\r\nimport GoogleSpeech from \"../util/GoogleSpeech\";\r\nimport LogoIcon from \"../components/LogoIcon\";\r\n\r\nconst styles = theme => ({\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginLeft: -12,\r\n        marginRight: 10,\r\n    },\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing.unit * 2,\r\n        right: theme.spacing.unit * 2,\r\n    },\r\n    successAvatar: {\r\n        margin: 10,\r\n        backgroundColor: green[400]\r\n    },\r\n    failAvatar: {\r\n        margin: 10,\r\n        backgroundColor: red[500]\r\n    },\r\n    title: {\r\n        marginTop: 20,\r\n        textAlign: \"center\"\r\n    }\r\n});\r\n\r\nclass Detail extends React.Component {\r\n    static LOOP_STATUS = {\r\n        idle: 0,\r\n        recording: 1,\r\n        wait: 2\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            attempts: undefined,\r\n            commandDetail: undefined,\r\n            loopStatus: Detail.LOOP_STATUS.idle\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData();\r\n    }\r\n\r\n    get successRate() {\r\n        if (this.state.commandDetail === undefined) {\r\n            return 0;\r\n        }\r\n\r\n        const successRate = Math.round(this.state.commandDetail.successRate * 100);\r\n        return isNaN(successRate) ? 0 : successRate;\r\n    }\r\n\r\n    get title() {\r\n        if (this.state.commandDetail === undefined) {\r\n            return \"\";\r\n        }\r\n\r\n        return this.state.commandDetail.name[0].toUpperCase() + this.state.commandDetail.name.substring(1);\r\n    }\r\n\r\n    getData = () => {\r\n        Firebase.getCommand(this.props.match.params.id)\r\n            .then(commandDetail => this.setState({commandDetail}));\r\n        Firebase.listAttempts(this.props.match.params.id)\r\n            .then(attempts => {\r\n                this.setState({\r\n                    attempts,\r\n                    loopStatus: Detail.LOOP_STATUS.idle\r\n                })\r\n            });\r\n    };\r\n\r\n    handleLoopStatusUpdate = () => {\r\n        if (this.state.loopStatus === Detail.LOOP_STATUS.idle) {\r\n            this._startRecording();\r\n        }\r\n        else if (this.state.loopStatus === Detail.LOOP_STATUS.recording) {\r\n            this._stopRecording();\r\n        }\r\n        else if (this.state.loopStatus === Detail.LOOP_STATUS.wait) {\r\n            // Do nothing - user shouldn't be allowed to click at this time\r\n        }\r\n        else {\r\n            alert(\"Oh no, something went wrong. :(\");\r\n            this.setState({\r\n                loopStatus: Detail.LOOP_STATUS.idle\r\n            });\r\n        }\r\n    };\r\n\r\n    _startRecording = () => {\r\n        this.setState({\r\n            loopStatus: Detail.LOOP_STATUS.wait\r\n        }, this._moveDog);\r\n    };\r\n\r\n    _stopRecording = () => {\r\n        this.setState({\r\n            loopStatus: Detail.LOOP_STATUS.wait\r\n        }, this._processData);\r\n    };\r\n\r\n    _moveDog = () => {\r\n        // Play TTS\r\n        GoogleSpeech.speak(this.state.commandDetail.name);\r\n\r\n        // Start recording\r\n        DragonBoard.startAccelerometer(this.props.match.params.id)\r\n            .then(status => {\r\n                if (status === 201) {\r\n                    this.setState({\r\n                        loopStatus: Detail.LOOP_STATUS.recording\r\n                    });\r\n                }\r\n                else {\r\n                    console.warn(status, \"Something went wrong. Restarting process.\");\r\n                    this.setState({\r\n                        loopStatus: Detail.LOOP_STATUS.idle\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    _processData = () => {\r\n        DragonBoard.stopAccelerometer()\r\n            .then(attemptId => {\r\n                Firebase.validateAttempt(this.props.match.params.id, attemptId)\r\n                    .then(() => {\r\n                        this.getData();\r\n                    });\r\n            });\r\n    };\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        return (\r\n            <div>\r\n                {/* Application bar */}\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <IconButton\r\n                            className={classes.menuButton}\r\n                            color=\"inherit\"\r\n                            aria-label=\"back\"\r\n                            component={Link}\r\n                            to=\"/\">\r\n                            <BackButton/>\r\n                        </IconButton>\r\n                        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                            <LogoIcon/>{\" Command Training\"}\r\n                        </Typography>\r\n                    </Toolbar>\r\n                </AppBar>\r\n\r\n                {\r\n                    this.state.commandDetail === undefined\r\n                        ? <CircularProgress/>\r\n                        : <div>\r\n                            {/* Success rate */}\r\n                            <Typography\r\n                                className={classes.title}\r\n                                variant=\"h2\">\r\n                                {this.successRate}%\r\n                            </Typography>\r\n                            {/* Skill name */}\r\n                            <Typography\r\n                                className={classes.title}\r\n                                variant=\"h6\">\r\n                                {this.title}\r\n                            </Typography>\r\n\r\n                            {/* History */}\r\n                            <List>\r\n                                {\r\n                                    this.state.attempts\r\n                                        ? this.state.attempts.map((item, index) => (\r\n                                            <ListItem key={index}>\r\n                                                <ListItemAvatar>\r\n                                                    <Avatar\r\n                                                        className={item.success ? classes.successAvatar : classes.failAvatar}>\r\n                                                        {\r\n                                                            item.success ? <SuccessIcon/> : <FailIcon/>\r\n                                                        }\r\n                                                    </Avatar>\r\n                                                </ListItemAvatar>\r\n                                                <ListItemText primary={moment(item.timestamp).fromNow()}/>\r\n                                            </ListItem>\r\n                                        ))\r\n                                        : <Typography style={{padding: \"1rem\"}}>\r\n                                            No entries yet. Click the button at the bottom to start recording!\r\n                                        </Typography>\r\n                                }\r\n                            </List>\r\n                        </div>\r\n                }\r\n\r\n                {/* Loop status update */}\r\n                <Fab\r\n                    className={classes.fab}\r\n                    color=\"secondary\"\r\n                    disabled={this.state.loopStatus === Detail.LOOP_STATUS.wait}\r\n                    onClick={this.handleLoopStatusUpdate}>\r\n                    {\r\n                        this.state.loopStatus === Detail.LOOP_STATUS.idle &&\r\n                        <PlayIcon/>\r\n                    }\r\n                    {\r\n                        this.state.loopStatus === Detail.LOOP_STATUS.recording &&\r\n                        <StopIcon/>\r\n                    }\r\n                    {\r\n                        this.state.loopStatus === Detail.LOOP_STATUS.wait &&\r\n                        <WaitIcon/>\r\n                    }\r\n                </Fab>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Detail);","import React, {Component} from 'react';\nimport {BrowserRouter} from \"react-router-dom\";\nimport Switch from \"react-router/es/Switch\";\nimport {Route} from \"react-router\";\nimport Home from \"./pages/home\";\nimport Detail from \"./pages/detail\";\nimport CssBaseline from \"@material-ui/core/CssBaseline/CssBaseline\";\nimport withStyles from \"@material-ui/core/es/styles/withStyles\";\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport {brown, green} from \"@material-ui/core/colors\";\n\nconst styles = theme => ({\n    root: {\n        backgroundColor: theme.palette.background.paper,\n        height: \"100vh\",\n        overflowY: \"scroll\"\n    }\n});\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: green[400]\n        },\n        secondary: {\n            main: brown[600]\n        }\n    }\n});\n\nclass App extends Component {\n    render() {\n        return (\n            <MuiThemeProvider theme={theme}>\n                <div className={this.props.classes.root}>\n                    <CssBaseline/>\n                    <BrowserRouter>\n                        <Switch>\n                            <Route component={Home} exact path=\"/\"/>\n                            <Route component={Detail} path=\"/detail/:id\"/>\n                        </Switch>\n                    </BrowserRouter>\n                </div>\n            </MuiThemeProvider>\n        );\n    }\n}\n\nexport default withStyles(styles)(App);\n","const isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    window.location.hostname === '[::1]' ||\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                checkValidServiceWorker(swUrl, config);\n\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit http://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n                            );\n\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            console.log('Content is cached for offline use.');\n\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    fetch(swUrl)\n        .then(response => {\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App/>, document.getElementById('root'));\nserviceWorker.register();\n"],"sourceRoot":""}